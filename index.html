const CurriculumManagement = () => {
                    const [selectedSubject, setSelectedSubject] = useState('Physics');
                    const [selectedGrade, setSelectedGrade] = useState(11);
                    const [editingChapter, setEditingChapter] = useState(null);
                    const [isAddingChapter, setIsAddingChapter] = useState(false);
                    const [chapterForm, setChapterForm] = useState({ id: '', name: '', topics: [], targetDate: '' });
                    const [newTopic, setNewTopic] = useState('');

                    const chapters = curriculum[selectedSubject]?.[selectedGrade] || [];

                    const handleSaveChapter = async () => {
                        try {
                            const updatedCurriculum = {
                                ...curriculum[selectedSubject],
                                [selectedGrade]: editingChapter
                                    ? chapters.map(ch => ch.id === chapterForm.id ? chapterForm : ch)
                                    : [...chapters, chapterForm]
                            };
                            await db.collection('curriculum').doc(selectedSubject).set(updatedCurriculum);
                            setEditingChapter(null);
                            setIsAddingChapter(false);
                            setChapterForm({ id: '', name: '', topics: [], targetDate: '' });
                            alert('Chapter saved successfully!');
                        } catch (error) {
                            alert('Error saving chapter');
                        }
                    };

                    const handleDeleteChapter = async (chapterId) => {
                        if (confirm('Delete this chapter?')) {
                            try {
                                const updatedCurriculum = {
                                    ...curriculum[selectedSubject],
                                    [selectedGrade]: chapters.filter(ch => ch.id !== chapterId)
                                };
                                await db.collection('curriculum').doc(selectedSubject).set(updatedCurriculum);
                                alert('Chapter deleted!');
                            } catch (error) {
                                alert('Error deleting chapter');
                            }
                        }
                    };

                    const addTopic = () => {
                        if (newTopic.trim()) {
                            setChapterForm({ ...chapterForm, topics: [...chapterForm.topics, newTopic.trim()] });
                            setNewTopic('');
                        }
                    };

                    const removeTopic = (index) => {
                        setChapterForm({ ...chapterForm, topics: chapterForm.topics.filter((_, i) => i !== index) });
                    };

                    return (
                        <div className="space-y-6">
                            <div className="flex justify-between items-center">
                                <h2 className="text-3xl font-bold text-gray-800">üìö Manage Curriculum</h2>
                                <button
                                    onClick={() => {
                                        setIsAddingChapter(true);
                                        setChapterForm({ id: `${selectedSubject.charAt(0)}${selectedGrade}-${Date.now()}`, name: '', topics: [], targetDate: '' });
                                    }}
                                    className="bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600"
                                >
                                    ‚ûï Add New Chapter
                                </button>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <div className="flex gap-4 mb-6">
                                    <select
                                        value={selectedSubject}
                                        onChange={(e) => setSelectedSubject(e.target.value)}
                                        className="px-4 py-2 border rounded-lg"
                                    >
                                        <option>Physics</option>
                                        <option>Chemistry</option>
                                        <option>Maths</option>
                                        <option>Biology</option>
                                    </select>
                                    <select
                                        value={selectedGrade}
                                        onChange={(e) => setSelectedGrade(Number(e.target.value))}
                                        className="px-4 py-2 border rounded-lg"
                                    >
                                        <option value={11}>Class 11th</option>
                                        <option value={12}>Class 12th</option>
                                    </select>
                                </div>

                                <div className="space-y-4">
                                    {chapters.map((chapter) => (
                                        <div key={chapter.id} className="border rounded-lg p-4">
                                            <div className="flex justify-between items-start">
                                                <div className="flex-1">
                                                    <h4 className="font-bold text-lg">{chapter.name}</h4>
                                                    <p className="text-sm text-gray-600 mt-1">Target Date: {chapter.targetDate}</p>
                                                    <p className="text-sm text-gray-600">Topics: {chapter.topics.join(', ')}</p>
                                                </div>
                                                <div className="flex gap-2">
                                                    <button
                                                        onClick={() => {
                                                            setEditingChapter(chapter.id);
                                                            setChapterForm(chapter);
                                                        }}
                                                        className="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600"
                                                    >
                                                        Edit
                                                    </button>
                                                    <button
                                                        onClick={() => handleDeleteChapter(chapter.id)}
                                                        className="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600"
                                                    >
                                                        Delete
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {(isAddingChapter || editingChapter) && (
                                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                                    <div className="bg-white rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                                        <h3 className="text-2xl font-bold mb-6">{isAddingChapter ? 'Add Chapter' : 'Edit Chapter'}</h3>
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm font-medium mb-1">Chapter Name</label>
                                                <input
                                                    type="text"
                                                    value={chapterForm.name}
                                                    onChange={(e) => setChapterForm({ ...chapterForm, name: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-1">Target Completion Date</label>
                                                <input
                                                    type="date"
                                                    value={chapterForm.targetDate}
                                                    onChange={(e) => setChapterForm({ ...chapterForm, targetDate: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-1">Topics</label>
                                                <div className="flex gap-2 mb-2">
                                                    <input
                                                        type="text"
                                                        value={newTopic}
                                                        onChange={(e) => setNewTopic(e.target.value)}
                                                        onKeyPress={(e) => e.key === 'Enter' && addTopic()}
                                                        placeholder="Enter topic name"
                                                        className="flex-1 px-3 py-2 border rounded-lg"
                                                    />
                                                    <button onClick={addTopic} className="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                                                        Add
                                                    </button>
                                                </div>
                                                <div className="space-y-2">
                                                    {chapterForm.topics.map((topic, idx) => (
                                                        <div key={idx} className="flex justify-between items-center bg-gray-50 p-2 rounded">
                                                            <span>{topic}</span>
                                                            <button onClick={() => removeTopic(idx)} className="text-red-500 hover:text-red-700">
                                                                ‚úï
                                                            </button>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                        <div className="flex gap-4 mt-6">
                                            <button onClick={handleSaveChapter} className="flex-1 bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600">
                                                Save
                                            </button>
                                            <button 
                                                onClick={() => { setIsAddingChapter(false); setEditingChapter(null); }}
                                                className="flex-1 bg-gray-500 text-white py-3 rounded-lg font-semibold hover:bg-gray-600"
                                            >
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    );
                };

                const AnalyticsDashboard = () => {
                    const allSubjects = ['Physics', 'Chemistry', 'Maths', 'Biology'];
                    
                    const teacherPerformance = teachers.map(teacher => {
                        let totalChapters = 0;
                        let completedChapters = 0;
                        let delayedChapters = 0;

                        [11, 12].forEach(grade => {
                            const chapters = curriculum[teacher.subject]?.[grade] || [];
                            totalChapters += chapters.length;
                            chapters.forEach(ch => {
                                const progress = chapterProgress[ch.id];
                                if (progress?.completed === 'Yes') {
                                    completedChapters++;
                                } else if (new Date() > new Date(ch.targetDate)) {
                                    delayedChapters++;
                                }
                            });
                        });

                        const percentage = totalChapters > 0 ? Math.round((completedChapters / totalChapters) * 100) : 0;
                        return { 
                            ...teacher, 
                            totalChapters, 
                            completedChapters, 
                            delayedChapters, 
                            percentage,
                            status: percentage >= 75 ? 'excellent' : percentage >= 50 ? 'good' : percentage >= 25 ? 'fair' : 'poor'
                        };
                    });

                    const schoolPerformance = [...new Set(teachers.map(t => t.school))].map(school => {
                        const schoolTeachers = teacherPerformance.filter(t => t.school === school);
                        const avgPercentage = schoolTeachers.length > 0 
                            ? Math.round(schoolTeachers.reduce((sum, t) => sum + t.percentage, 0) / schoolTeachers.length)
                            : 0;
                        return {
                            school,
                            avgPercentage,
                            status: avgPercentage >= 75 ? 'On Track' : avgPercentage >= 50 ? 'Monitor' : 'Lagging'
                        };
                    });

                    const subjectData = allSubjects.map(subject => {
                        let total = 0;
                        let completed = 0;
                        [11, 12].forEach(grade => {
                            const chapters = curriculum[subject]?.[grade] || [];
                            total += chapters.length;
                            chapters.forEach(ch => {
                                if (chapterProgress[ch.id]?.completed === 'Yes') completed++;
                            });
                        });
                        return { subject, completed, remaining: total - completed, total };
                    });

                    return (
                        <div className="space-y-6">
                            <h2 className="text-3xl font-bold text-gray-800">üìä Analytics Dashboard</h2>

                            <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                                <div className="bg-gradient-to-br from-purple-500 to-purple-700 text-white rounded-xl p-6">
                                    <div className="text-4xl mb-2">üë•</div>
                                    <div className="text-3xl font-bold">{teachers.length}</div>
                                    <div className="text-purple-100 text-sm">Total Teachers</div>
                                </div>
                                <div className="bg-gradient-to-br from-blue-500 to-blue-700 text-white rounded-xl p-6">
                                    <div className="text-4xl mb-2">‚úÖ</div>
                                    <div className="text-3xl font-bold">
                                        {Object.values(chapterProgress).filter(p => p.completed === 'Yes').length}
                                    </div>
                                    <div className="text-blue-100 text-sm">Chapters Completed</div>
                                </div>
                                <div className="bg-gradient-to-br from-orange-500 to-orange-700 text-white rounded-xl p-6">
                                    <div className="text-4xl mb-2">‚è≥</div>
                                    <div className="text-3xl font-bold">
                                        {teacherPerformance.reduce((sum, t) => sum + t.delayedChapters, 0)}
                                    </div>
                                    <div className="text-orange-100 text-sm">Delayed Chapters</div>
                                </div>
                                <div className="bg-gradient-to-br from-green-500 to-green-700 text-white rounded-xl p-6">
                                    <div className="text-4xl mb-2">üéØ</div>
                                    <div className="text-3xl font-bold">
                                        {Math.round(teacherPerformance.reduce((sum, t) => sum + t.percentage, 0) / teacherPerformance.length)}%
                                    </div>
                                    <div className="text-green-100 text-sm">Avg Completion</div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div className="bg-white rounded-xl shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-4">Subject-wise Progress</h3>
                                    <div className="space-y-4">
                                        {subjectData.map((data, idx) => {
                                            const colors = ['bg-purple-500', 'bg-blue-500', 'bg-orange-500', 'bg-green-500'];
                                            const percentage = data.total > 0 ? Math.round((data.completed / data.total) * 100) : 0;
                                            return (
                                                <div key={idx}>
                                                    <div className="flex justify-between mb-1">
                                                        <span className="font-medium">{data.subject}</span>
                                                        <span className="font-bold">{percentage}%</span>
                                                    </div>
                                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                                        <div className={`h-3 rounded-full ${colors[idx]}`} style={{ width: `${percentage}%` }}></div>
                                                    </div>
                                                    <p className="text-xs text-gray-600 mt-1">{data.completed}/{data.total} chapters</p>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>

                                <div className="bg-white rounded-xl shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-4">School Performance</h3>
                                    <div className="space-y-3">
                                        {schoolPerformance.map((school, idx) => (
                                            <div key={idx} className={`p-3 rounded-lg ${
                                                school.status === 'On Track' ? 'bg-green-100 border-l-4 border-green-500' :
                                                school.status === 'Monitor' ? 'bg-yellow-100 border-l-4 border-yellow-500' :
                                                'bg-red-100 border-l-4 border-red-500'
                                            }`}>
                                                <div className="flex justify-between items-center">
                                                    <div>
                                                        <span className="font-medium">{school.school}</span>
                                                        <span className={`ml-2 text-xs px-2 py-1 rounded ${
                                                            school.status === 'On Track' ? 'bg-green-200 text-green-800' :
                                                            school.status === 'Monitor' ? 'bg-yellow-200 text-yellow-800' :
                                                            'bg-red-200 text-red-800'
                                                        }`}>
                                                            {school.status}
                                                        </span>
                                                    </div>
                                                    <span className="text-2xl font-bold">{school.avgPercentage}%</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <h3 className="text-xl font-bold mb-4">Teacher Performance</h3>
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="border-b-2 bg-gray-50">
                                                <th className="text-left p-3">Teacher</th>
                                                <th className="text-left p-3">Subject</th>
                                                <th className="text-left p-3">School</th>
                                                <th className="text-left p-3">Completed</th>
                                                <th className="text-left p-3">Delayed</th>
                                                <th className="text-left p-3">Progress</th>
                                                <th className="text-left p-3">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {teacherPerformance.sort((a, b) => b.percentage - a.percentage).map((teacher, idx) => (
                                                <tr key={idx} className="border-b hover:bg-gray-50">
                                                    <td className="p-3 font-medium">{teacher.name}</td>
                                                    <td className="p-3">{teacher.subject}</td>
                                                    <td className="p-3 text-sm">{teacher.school}</td>
                                                    <td className="p-3 text-green-600 font-semibold">{teacher.completedChapters}/{teacher.totalChapters}</td>
                                                    <td className="p-3 text-red-600 font-semibold">{teacher.delayedChapters}</td>
                                                    <td className="p-3">
                                                        <div className="w-24 bg-gray-200 rounded-full h-2">
                                                            <div 
                                                                className={`h-2 rounded-full ${
                                                                    teacher.status === 'excellent' ? 'bg-green-500' :
                                                                    teacher.status === 'good' ? 'bg-blue-500' :
                                                                    teacher.status === 'fair' ? 'bg-yellow-500' : 'bg-red-500'
                                                                }`}
                                                                style={{ width: `${teacher.percentage}%` }}
                                                            ></div>
                                                        </div>
                                                    </td>
                                                    <td className="p-3">
                                                        <span className={`px-2 py-1 rounded text-xs font-semibold ${
                                                            teacher.status === 'excellent' ? 'bg-green-100 text-green-800' :
                                                            teacher.status === 'good' ? 'bg-blue-100 text-blue-800' :
                                                            teacher.status === 'fair' ? 'bg-yellow-100 text-yellow-800' :
                                                            'bg-red-100 text-red-800'
                                                        }`}>
                                                            {teacher.percentage}%
                                                        </span>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    );
                };

                // Teacher Components
                const OverviewPage = () => {
                    const subjects = ['Physics', 'Chemistry', 'Maths', 'Biology'];
                    const today = new Date();
                    const isBirthday = today.getMonth() === new Date(currentUser.dob).getMonth() && 
                                      today.getDate() === new Date(currentUser.dob).getDate();
                    
                    return (
                        <div className="space-y-6">
                            <h2 className="text-3xl font-bold text-gray-800">üìä Overview Dashboard</h2>
                            
                            {showConfetti && <Confetti />}
                            
                            {isBirthday && (
                                <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-6 rounded-xl shadow-lg text-center animate-bounce">
                                    <div className="text-5xl mb-3">üéÇüéâ</div>
                                    <h3 className="text-2xl font-bold">Happy Birthday {currentUser.name}!</h3>
                                    <p className="mt-2">Wishing you a wonderful year ahead filled with success!</p>
                                </div>
                            )}

                            {birthdaysThisWeek.length > 0 && (
                                <div className="bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300 rounded-xl p-6">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">üéÇ Upcoming Birthdays This Week</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        {birthdaysThisWeek.map((teacher, idx) => (
                                            <div key={idx} className="bg-white rounded-lg p-3 shadow">
                                                <span className="font-semibold">{teacher.name}</span>
                                                <span className="text-sm text-gray-600 ml-2">
                                                    {teacher.daysUntil === 0 ? 'üéâ Today!' : `in ${teacher.daysUntil} day${teacher.daysUntil > 1 ? 's' : ''}`}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {[11, 12].map(grade => (
                                    <div key={grade} className="bg-white rounded-xl shadow-lg p-6">
                                        <h3 className="text-2xl font-bold text-gray-800 mb-4">Class {grade}th</h3>
                                        <div className="space-y-4">
                                            {subjects.map(subject => {
                                                const completion = getSubjectCompletion(subject, grade);
                                                const status = completion.percentage === 100 ? 'completed' : 
                                                              completion.percentage >= 50 ? 'on-track' : 'delayed';
                                                const bgColor = status === 'completed' ? 'bg-green-100 border-green-500' :
                                                               status === 'delayed' ? 'bg-red-100 border-red-500' :
                                                               'bg-white border-gray-300';
                                                
                                                return (
                                                    <div key={subject} className={`p-4 rounded-lg border-2 ${bgColor}`}>
                                                        <div className="flex justify-between items-center">
                                                            <span className="font-semibold text-gray-800">{subject}</span>
                                                            <span className="text-2xl font-bold text-gray-700">{completion.percentage}%</span>
                                                        </div>
                                                        <div className="mt-2 bg-gray-200 rounded-full h-3">
                                                            <div 
                                                                className={`h-3 rounded-full transition-all duration-500 ${status === 'completed' ? 'bg-green-500' : status === 'delayed' ? 'bg-red-500' : 'bg-blue-500'}`}
                                                                style={{ width: `${completion.percentage}%` }}
                                                            ></div>
                                                        </div>
                                                        <p className="text-sm text-gray-600 mt-2">
                                                            {completion.completed} / {completion.total} chapters completed
                                                        </p>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    );
                };

                const ChaptersPage = () => {
                    const [selectedGrade, setSelectedGrade] = useState(11);
                    const chapters = curriculum[currentUser.subject]?.[selectedGrade] || [];

                    return (
                        <div className="space-y-6">
                            <h2 className="text-3xl font-bold text-gray-800">üìñ Chapters - {currentUser.subject}</h2>

                            <div className="flex gap-4">
                                <button
                                    onClick={() => setSelectedGrade(11)}
                                    className={`px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 ${
                                        selectedGrade === 11 
                                        ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg' 
                                        : 'bg-white text-gray-700 hover:bg-gray-50 shadow'
                                    }`}
                                >
                                    Class 11th
                                </button>
                                <button
                                    onClick={() => setSelectedGrade(12)}
                                    className={`px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 ${
                                        selectedGrade === 12 
                                        ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg' 
                                        : 'bg-white text-gray-700 hover:bg-gray-50 shadow'
                                    }`}
                                >
                                    Class 12th
                                </button>
                            </div>

                            {showConfetti && <Confetti />}

                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {chapters.map(chapter => {
                                    const progress = chapterProgress[chapter.id] || {};
                                    const completedTopics = progress.completedTopics || [];
                                    const chapterStatus = getChapterStatus(chapter, progress);

                                    return (
                                        <div 
                                            key={chapter.id} 
                                            className={`rounded-xl border-2 ${chapterStatus.color} p-6 shadow-lg transition-all duration-300 hover:shadow-2xl hover:scale-105 transform`}
                                            style={{ perspective: '1000px' }}
                                        >
                                            <div className="flex justify-between items-start mb-3">
                                                <h3 className="font-bold text-lg text-gray-800 flex-1">{chapter.name}</h3>
                                                <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                                    chapterStatus.status === 'ahead' ? 'bg-green-200 text-green-800' :
                                                    chapterStatus.status === 'completed' ? 'bg-green-200 text-green-800' :
                                                    chapterStatus.status === 'delayed' ? 'bg-red-200 text-red-800' :
                                                    'bg-blue-200 text-blue-800'
                                                }`}>
                                                    {chapterStatus.label}
                                                </span>
                                            </div>
                                            
                                            <div className="space-y-3 text-sm">
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">Topics:</span>
                                                    <span className="font-semibold">{completedTopics.length}/{chapter.topics.length}</span>
                                                </div>
                                                
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">Target Date:</span>
                                                    <span className="font-semibold">{chapter.targetDate}</span>
                                                </div>

                                                {progress.completionDate && (
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-600">Completed:</span>
                                                        <span className="font-semibold text-green-600">{progress.completionDate}</span>
                                                    </div>
                                                )}

                                                <div className="w-full bg-gray-200 rounded-full h-2">
                                                    <div 
                                                        className="h-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500"
                                                        style={{ width: `${(completedTopics.length / chapter.topics.length) * 100}%` }}
                                                    ></div>
                                                </div>
                                            </div>

                                            <hr className="my-4 border-gray-200" />

                                            <div className="space-y-3">
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">Chapter Completed?</label>
                                                    <select
                                                        value={progress.completed || 'No'}
                                                        onChange={(e) => {
                                                            updateChapterProgress(chapter.id, 'completed', e.target.value);
                                                            if (e.target.value === 'Yes') {
                                                                updateChapterProgress(chapter.id, 'completionDate', new Date().toISOString().split('T')[0]);
                                                            }
                                                        }}
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
                                                    >
                                                        <option>No</option>
                                                        <option>Yes</option>
                                                    </select>
                                                </div>

                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">Method</label>
                                                    <select
                                                        value={progress.method || 'Online'}
                                                        onChange={(e) => updateChapterProgress(chapter.id, 'method', e.target.value)}
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
                                                    >
                                                        <option>Online</option>
                                                        <option>Offline</option>
                                                    </select>
                                                </div>

                                                {progress.method === 'Offline' && (
                                                    <div className="animate-slideDown">
                                                        <label className="block text-sm font-medium text-gray-700 mb-1">Notes (Why offline?)</label>
                                                        <textarea
                                                            value={progress.notes || ''}
                                                            onChange={(e) => updateChapterProgress(chapter.id, 'notes', e.target.value)}
                                                            placeholder="Reason for offline teaching..."
                                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
                                                            rows="2"
                                                        />
                                                    </div>
                                                )}
                                            </div>

                                            <hr className="my-4 border-gray-200" />

                                            <details className="cursor-pointer group">
                                                <summary className="font-semibold text-purple-600 hover:text-purple-800 select-none list-none flex justify-between items-center">
                                                    <span>View Topics ({completedTopics.length}/{chapter.topics.length})</span>
                                                    <span className="transform group-open:rotate-180 transition-transform">‚ñº</span>
                                                </summary>
                                                <div className="mt-3 space-y-2 max-h-48 overflow-y-auto animate-slideDown">
                                                    {chapter.topics.map((topic, idx) => (
                                                        <label 
                                                            key={idx} 
                                                            className="flex items-center gap-2 text-sm hover:bg-purple-50 p-2 rounded cursor-pointer transition-all transform hover:scale-102"
                                                        >
                                                            <input
                                                                type="checkbox"
                                                                checked={completedTopics.includes(topic)}
                                                                onChange={(e) => {
                                                                    const updated = e.target.checked 
                                                                        ? [...completedTopics, topic]
                                                                        : completedTopics.filter(t => t !== topic);
                                                                    updateChapterProgress(chapter.id, 'completedTopics', updated);
                                                                }}
                                                                className="w-4 h-4 text-purple-600 rounded focus:ring-purple-500"
                                                            />
                                                            <span className={completedTopics.includes(topic) ? 'line-through text-gray-500' : ''}>
                                                                {topic}
                                                            </span>
                                                        </label>
                                                    ))}
                                                </div>
                                            </details>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    );
                };

                const ProfilePage = () => {
                    return (
                        <div className="space-y-6">
                            <h2 className="text-3xl font-bold text-gray-800">üë§ Teacher Profile</h2>

                            <div className="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl shadow-lg p-8 transform hover:scale-102 transition-all">
                                <div className="flex flex-col md:flex-row gap-8">
                                    <div className="flex-shrink-0">
                                        <div className="w-32 h-32 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-4xl font-bold shadow-2xl transform hover:rotate-12 transition-transform">
                                            {currentUser.name.charAt(0)}
                                        </div>
                                    </div>
                                    <div className="flex-1">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {[
                                                { label: 'Name', value: currentUser.name },
                                                { label: 'AFID', value: currentUser.afid },
                                                { label: 'Subject', value: currentUser.subject },
                                                { label: 'Centre Name', value: currentUser.school },
                                                { label: 'Date of Birth', value: new Date(currentUser.dob).toLocaleDateString() },
                                                { label: 'Email', value: currentUser.email },
                                                { label: 'Phone Number', value: currentUser.phone }
                                            ].map((item, idx) => (
                                                <div key={idx} className="bg-white rounded-lg p-4 shadow hover:shadow-lg transition-all transform hover:scale-105">
                                                    <label className="text-sm text-gray-600 font-medium">{item.label}</label>
                                                    <div className="text-lg font-semibold text-gray-800 mt-1">{item.value}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                };

                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-red-50">
                        <nav className="bg-white shadow-lg sticky top-0 z-40 backdrop-blur-sm bg-opacity-95">
                            <div className="max-w-7xl mx-auto px-4 py-4">
                                <div className="flex justify-between items-center">
                                    <div className="flex items-center gap-3">
                                        <div className="text-3xl animate-bounce">üìö</div>
                                        <div>
                                            <h1 className="text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                                                Curriculum Tracker
                                            </h1>
                                            <p className="text-sm text-gray-600">{currentUser.name} - {currentUser.school || 'Administrator'}</p>
                                        </div>
                                    </div>
                                    <button
                                        onClick={handleLogout}
                                        className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition shadow-md hover:shadow-lg transform hover:scale-105"
                                    >
                                        üö™ Logout
                                    </button>
                                </div>
                            </div>
                        </nav>

                        <div className="max-w-7xl mx-auto px-4 py-6">
                            {isAdmin ? (
                                <div>
                                    <div className="mb-6 flex gap-2 overflow-x-auto pb-2">
                                        {[
                                            { id: 'teachers', label: 'Teachers', icon: 'üë•' },
                                            { id: 'curriculum', label: 'Curriculum', icon: 'üìö' },
                                            { id: 'analytics', label: 'Analytics', icon: 'üìä' }
                                        ].map(tab => (
                                            <button
                                                key={tab.id}
                                                onClick={() => setActiveTab(tab.id)}
                                                className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all whitespace-nowrap transform hover:scale-105 ${
                                                    activeTab === tab.id
                                                        ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg'
                                                        : 'bg-white text-gray-700 hover:bg-gray-50 shadow'
                                                }`}
                                            >
                                                <span className="text-xl">{tab.icon}</span>
                                                {tab.label}
                                            </button>
                                        ))}
                                    </div>

                                    {activeTab === 'teachers' && <TeachersManagement />}
                                    {activeTab === 'curriculum' && <CurriculumManagement />}
                                    {activeTab === 'analytics' && <AnalyticsDashboard />}
                                </div>
                            ) : (
                                <div>
                                    <div className="mb-6 flex gap-2 overflow-x-auto pb-2">
                                        {[
                                            { id: 'overview', label: 'Overview', icon: 'üè†' },
                                            { id: 'chapters', label: 'Chapters', icon: 'üìñ' },
                                            { id: 'profile', label: 'Profile', icon: 'üë§' }
                                        ].map(tab => (
                                            <button
                                                key={tab.id}
                                                onClick={() => setActiveTab(tab.id)}
                                                className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all whitespace-nowrap transform hover:scale-105 ${
                                                    activeTab === tab.id
                                                        ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg'
                                                        : 'bg-white text-gray-700 hover:bg-gray-50 shadow'
                                                }`}
                                            >
                                                <span className="text-xl">{tab.icon}</span>
                                                {tab.label}
                                            </button>
                                        ))}
                                    </div>

                                    {activeTab === 'overview' && <OverviewPage />}
                                    {activeTab === 'chapters' && <ChaptersPage />}
                                    {activeTab === 'profile' && <ProfilePage />}
                                </div>
                            )}
                        </div>

                        <footer className="bg-white mt-12 py-6 shadow-inner">
                            <div className="max-w-7xl mx-auto px-4 text-center">
                                <p className="text-gray-600 text-sm">¬© 2025 Curriculum Tracker | Made with ‚ù§Ô∏è for Teachers</p>
                            </div>
                        </footer>
                    </div>
                );
            }

            ReactDOM.render(<App />, document.getElementById('root'));
        }
    </script>
    
    <style>
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-slideDown {
            animation: slideDown 0.3s ease-out;
        }
        
        .hover\:scale-102:hover {
            transform: scale(1.02);
        }
        
        /* Smooth transitions for all elements */
        * {
            transition: all 0.2s ease-in-out;
        }
    </style>
</body>
</html>
                <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curriculum Tracker</title>
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- React Scripts -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Recharts for Analytics -->
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    
    <style>
        @keyframes fall { to { transform: translateY(100vh); opacity: 0; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        * { margin: 0; padding: 0; box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        window.addEventListener('load', function() {
            if (typeof firebase === 'undefined') {
                document.getElementById('root').innerHTML = `
                    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: linear-gradient(to bottom right, #9333ea, #ec4899); font-family: sans-serif;">
                        <div style="background: white; padding: 2rem; border-radius: 1rem; text-align: center; max-width: 400px;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
                            <h2 style="font-size: 1.5rem; font-weight: bold; color: #1f2937; margin-bottom: 1rem;">Firebase Loading Error</h2>
                            <p style="color: #6b7280; margin-bottom: 1rem;">Unable to load Firebase. Please refresh the page.</p>
                            <button onclick="location.reload()" style="background: #9333ea; color: white; padding: 0.5rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; font-weight: 600;">Reload Page</button>
                        </div>
                    </div>
                `;
                return;
            }

            // ============================================
            // REPLACE WITH YOUR FIREBASE CONFIG
            // ============================================
            const firebaseConfig = {
                apiKey: "YOUR_API_KEY",
                authDomain: "YOUR_PROJECT.firebaseapp.com",
                projectId: "YOUR_PROJECT_ID",
                storageBucket: "YOUR_PROJECT.appspot.com",
                messagingSenderId: "YOUR_SENDER_ID",
                appId: "YOUR_APP_ID"
            };

            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            const db = firebase.firestore();

            startApp(db);
        });

        function startApp(db) {
            const { useState, useEffect } = React;

            // Initial Data
            const INITIAL_TEACHERS = [
                { afid: 'AF248', name: 'Vivek Bansal', subject: 'Physics', school: 'CoE Barwani', dob: '1990-03-15', email: 'vivek@example.com', phone: '9876543210', password: 'pass123' },
                { afid: 'AF464', name: 'Sandeep Dixit', subject: 'Chemistry', school: 'CoE Barwani', dob: '1988-07-22', email: 'sandeep@example.com', phone: '9876543211', password: 'pass123' },
                { afid: 'AF853', name: 'Dayanand Kumar', subject: 'Maths', school: 'CoE Barwani', dob: '1992-11-08', email: 'dayanand@example.com', phone: '9876543212', password: 'pass123' },
                { afid: 'AF709', name: 'Arpith Singh', subject: 'Maths', school: 'CoE Cuttak', dob: '1991-05-19', email: 'arpith@example.com', phone: '9876543213', password: 'pass123' },
                { afid: 'AF832', name: 'Shubham Patil', subject: 'Chemistry', school: 'CoE Cuttak', dob: '1989-09-30', email: 'shubham@example.com', phone: '9876543214', password: 'pass123' },
                { afid: 'AF459', name: 'Ekanta Sahu', subject: 'Physics', school: 'CoE Cuttak', dob: '1993-12-25', email: 'ekanta@example.com', phone: '9876543215', password: 'pass123' },
                { afid: 'AF790', name: 'Anubhav Sundaria', subject: 'Maths', school: 'CoE Bundi', dob: '1990-02-14', email: 'anubhav@example.com', phone: '9876543216', password: 'pass123' },
                { afid: 'AF789', name: 'Md. Saif Farooqui', subject: 'Chemistry', school: 'CoE Bundi', dob: '1991-08-07', email: 'saif@example.com', phone: '9876543217', password: 'pass123' },
                { afid: 'AF788', name: 'Ajay Kumar', subject: 'Physics', school: 'CoE Bundi', dob: '1988-10-20', email: 'ajay@example.com', phone: '9876543218', password: 'pass123' },
                { afid: 'AF529', name: 'Shivam Gupta', subject: 'Physics', school: 'EMRS Bhopal', dob: '1992-01-11', email: 'shivam@example.com', phone: '9876543219', password: 'pass123' },
                { afid: 'AF840', name: 'Darshil Jain', subject: 'Chemistry', school: 'EMRS Bhopal', dob: '1990-06-28', email: 'darshil@example.com', phone: '9876543220', password: 'pass123' },
                { afid: 'AF834', name: 'Sunil Parmar', subject: 'Maths', school: 'EMRS Bhopal', dob: '1989-04-17', email: 'sunil@example.com', phone: '9876543221', password: 'pass123' },
                { afid: 'AF843', name: 'Yogesh Kumar', subject: 'Physics', school: 'CoE Mahisagar', dob: '1991-10-03', email: 'yogesh@example.com', phone: '9876543222', password: 'pass123' },
                { afid: 'AF635', name: 'Archana', subject: 'Chemistry', school: 'CoE Mahisagar', dob: '1993-10-15', email: 'archana@example.com', phone: '9876543223', password: 'pass123' },
                { afid: 'AF842', name: 'Monu Kumar', subject: 'Maths', school: 'CoE Mahisagar', dob: '1990-12-09', email: 'monu@example.com', phone: '9876543224', password: 'pass123' },
                { afid: 'AF804', name: 'Nidhi', subject: 'Physics', school: 'JNV Bharuch', dob: '1992-03-21', email: 'nidhi@example.com', phone: '9876543225', password: 'pass123' },
                { afid: 'AF800', name: 'Madan Singh', subject: 'Chemistry', school: 'JNV Bharuch', dob: '1988-08-14', email: 'madan@example.com', phone: '9876543226', password: 'pass123' },
                { afid: 'AF786', name: 'Jyoti', subject: 'Maths', school: 'JNV Bharuch', dob: '1991-11-26', email: 'jyoti@example.com', phone: '9876543227', password: 'pass123' },
                { afid: 'AF723', name: 'Ranjesh', subject: 'Biology', school: 'JNV Bharuch', dob: '1990-05-05', email: 'ranjesh@example.com', phone: '9876543228', password: 'pass123' }
            ];

            function App() {
                const [currentUser, setCurrentUser] = useState(null);
                const [isAdmin, setIsAdmin] = useState(false);
                const [activeTab, setActiveTab] = useState('overview');
                const [loginForm, setLoginForm] = useState({ afid: '', password: '' });
                const [showConfetti, setShowConfetti] = useState(false);
                const [confettiMessage, setConfettiMessage] = useState('');
                const [chapterProgress, setChapterProgress] = useState({});
                const [teachers, setTeachers] = useState([]);
                const [curriculum, setCurriculum] = useState({});
                const [loading, setLoading] = useState(false);
                const [birthdaysThisWeek, setBirthdaysThisWeek] = useState([]);
                const [birthdaysThisMonth, setBirthdaysThisMonth] = useState([]);

                useEffect(() => {
                    const initDB = async () => {
                        try {
                            const initDoc = await db.collection('system').doc('initialized').get();
                            if (!initDoc.exists) {
                                for (const teacher of INITIAL_TEACHERS) {
                                    await db.collection('teachers').doc(teacher.afid).set(teacher);
                                }
                                await db.collection('system').doc('initialized').set({ date: new Date().toISOString() });
                            }
                        } catch (error) {
                            console.error('Init error:', error);
                        }
                    };

                    const loadTeachers = () => {
                        db.collection('teachers').onSnapshot((snapshot) => {
                            const teachersList = snapshot.docs.map(doc => ({ ...doc.data() }));
                            setTeachers(teachersList);
                            checkUpcomingBirthdays(teachersList);
                        });
                    };

                    const loadCurriculum = () => {
                        db.collection('curriculum').onSnapshot((snapshot) => {
                            const curriculumData = {};
                            snapshot.docs.forEach(doc => {
                                curriculumData[doc.id] = doc.data();
                            });
                            setCurriculum(curriculumData);
                        });
                    };

                    const loadProgress = () => {
                        db.collection('chapterProgress').onSnapshot((snapshot) => {
                            const progress = {};
                            snapshot.docs.forEach(doc => {
                                progress[doc.id] = doc.data();
                            });
                            setChapterProgress(progress);
                        });
                    };

                    initDB();
                    loadTeachers();
                    loadCurriculum();
                    loadProgress();
                }, []);

                useEffect(() => {
                    if (showConfetti) {
                        setTimeout(() => setShowConfetti(false), 4000);
                    }
                }, [showConfetti]);

                const checkUpcomingBirthdays = (teachersList) => {
                    const today = new Date();
                    const thisWeek = [];
                    const thisMonth = [];

                    teachersList.forEach(teacher => {
                        const dob = new Date(teacher.dob);
                        const thisYearBirthday = new Date(today.getFullYear(), dob.getMonth(), dob.getDate());
                        const daysUntil = Math.ceil((thisYearBirthday - today) / (1000 * 60 * 60 * 24));

                        if (daysUntil >= 0 && daysUntil <= 7) {
                            thisWeek.push({ ...teacher, daysUntil });
                        }
                        if (today.getMonth() === dob.getMonth()) {
                            thisMonth.push(teacher);
                        }
                    });

                    setBirthdaysThisWeek(thisWeek);
                    setBirthdaysThisMonth(thisMonth);
                };

                const handleLogin = async () => {
                    setLoading(true);
                    setTimeout(async () => {
                        if (loginForm.afid === 'ADMIN' && loginForm.password === 'admin123') {
                            setIsAdmin(true);
                            setCurrentUser({ name: 'Administrator', afid: 'ADMIN' });
                            setActiveTab('teachers');
                        } else {
                            const teacher = teachers.find(t => t.afid === loginForm.afid && t.password === loginForm.password);
                            if (teacher) {
                                setCurrentUser(teacher);
                                setIsAdmin(false);
                                setActiveTab('overview');
                                checkBirthday(teacher);
                            } else {
                                alert('Invalid AFID or Password');
                            }
                        }
                        setLoading(false);
                    }, 500);
                };

                const checkBirthday = (teacher) => {
                    const today = new Date();
                    const dob = new Date(teacher.dob);
                    if (today.getMonth() === dob.getMonth() && today.getDate() === dob.getDate()) {
                        setConfettiMessage(`Happy Birthday ${teacher.name}! üéÇ`);
                        setShowConfetti(true);
                    }
                };

                const updateChapterProgress = async (chapterId, field, value) => {
                    try {
                        const currentProgress = chapterProgress[chapterId] || {};
                        const updatedProgress = {
                            ...currentProgress,
                            [field]: value,
                            lastUpdated: new Date().toISOString(),
                            updatedBy: currentUser.afid
                        };
                        await db.collection('chapterProgress').doc(chapterId).set(updatedProgress, { merge: true });
                        
                        if (field === 'completed' && value === 'Yes') {
                            setConfettiMessage('Chapter Completed! Great Work! üéâ');
                            setShowConfetti(true);
                        }
                    } catch (error) {
                        console.error('Update error:', error);
                        alert('Failed to save. Check your internet connection.');
                    }
                };

                const getChapterStatus = (chapter, progress) => {
                    const today = new Date();
                    const targetDate = new Date(chapter.targetDate);
                    const completionDate = progress.completionDate ? new Date(progress.completionDate) : null;

                    if (progress.completed === 'Yes') {
                        if (completionDate && completionDate <= targetDate) {
                            return { status: 'ahead', label: 'Ahead - Good Job!', color: 'bg-green-50 border-green-500' };
                        }
                        return { status: 'completed', label: 'On Track', color: 'bg-green-50 border-green-500' };
                    }

                    if (today > targetDate) {
                        return { status: 'delayed', label: 'Delayed', color: 'bg-red-50 border-red-500' };
                    }

                    return { status: 'pending', label: 'In Progress', color: 'bg-white border-gray-300' };
                };

                const getSubjectCompletion = (subject, grade) => {
                    const chapters = curriculum[subject]?.[grade] || [];
                    const completed = chapters.filter(ch => chapterProgress[ch.id]?.completed === 'Yes').length;
                    return { 
                        total: chapters.length, 
                        completed, 
                        percentage: chapters.length ? Math.round((completed / chapters.length) * 100) : 0 
                    };
                };

                const handleLogout = () => {
                    setCurrentUser(null);
                    setIsAdmin(false);
                    setActiveTab('overview');
                    setLoginForm({ afid: '', password: '' });
                };

                if (!currentUser) {
                    return (
                        <div className="min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-red-500 flex items-center justify-center p-4">
                            <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                                <div className="text-center mb-8">
                                    <div className="text-6xl mb-4">üìö</div>
                                    <h1 className="text-3xl font-bold text-gray-800">Curriculum Tracker</h1>
                                    <p className="text-gray-600 mt-2">Track Your Teaching Journey</p>
                                </div>
                                <div className="space-y-4">
                                    <input
                                        type="text"
                                        placeholder="Enter AFID"
                                        value={loginForm.afid}
                                        onChange={(e) => setLoginForm({ ...loginForm, afid: e.target.value.toUpperCase() })}
                                        className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                                    />
                                    <input
                                        type="password"
                                        placeholder="Enter Password"
                                        value={loginForm.password}
                                        onChange={(e) => setLoginForm({ ...loginForm, password: e.target.value })}
                                        onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                                        className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                                    />
                                    <button
                                        onClick={handleLogin}
                                        disabled={loading}
                                        className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50"
                                    >
                                        {loading ? 'Logging in...' : 'Login'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    );
                }

                const Confetti = () => (
                    <div className="fixed inset-0 pointer-events-none z-50">
                        {[...Array(100)].map((_, i) => (
                            <div
                                key={i}
                                className="absolute text-3xl"
                                style={{
                                    left: `${Math.random() * 100}%`,
                                    top: `${-20 + Math.random() * 20}%`,
                                    animation: `fall ${3 + Math.random() * 2}s linear forwards`,
                                    animationDelay: `${Math.random() * 2}s`
                                }}
                            >
                                {['üéâ', 'üéä', 'üéà', '‚ú®', 'üåü'][Math.floor(Math.random() * 5)]}
                            </div>
                        ))}
                        {confettiMessage && (
                            <div className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-8 py-4 rounded-full shadow-2xl text-xl font-bold animate-bounce">
                                {confettiMessage}
                            </div>
                        )}
                    </div>
                );

                // Admin Components
                const TeachersManagement = () => {
                    const [editingTeacher, setEditingTeacher] = useState(null);
                    const [isAdding, setIsAdding] = useState(false);
                    const [formData, setFormData] = useState({
                        afid: '', name: '', subject: '', school: '', dob: '', email: '', phone: '', password: 'pass123'
                    });

                    const handleSave = async () => {
                        try {
                            await db.collection('teachers').doc(formData.afid).set(formData);
                            setEditingTeacher(null);
                            setIsAdding(false);
                            setFormData({ afid: '', name: '', subject: '', school: '', dob: '', email: '', phone: '', password: 'pass123' });
                            alert('Teacher saved successfully!');
                        } catch (error) {
                            alert('Error saving teacher');
                        }
                    };

                    const handleDelete = async (afid) => {
                        if (confirm('Are you sure you want to delete this teacher?')) {
                            try {
                                await db.collection('teachers').doc(afid).delete();
                                alert('Teacher deleted successfully!');
                            } catch (error) {
                                alert('Error deleting teacher');
                            }
                        }
                    };

                    return (
                        <div className="space-y-6">
                            <div className="flex justify-between items-center">
                                <h2 className="text-3xl font-bold text-gray-800">üë• Manage Teachers</h2>
                                <button
                                    onClick={() => {
                                        setIsAdding(true);
                                        setFormData({ afid: '', name: '', subject: '', school: '', dob: '', email: '', phone: '', password: 'pass123' });
                                    }}
                                    className="bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition shadow-lg"
                                >
                                    ‚ûï Add New Teacher
                                    </button>
                            </div>

                            {(isAdding || editingTeacher) && (
                                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                                    <div className="bg-white rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                                        <h3 className="text-2xl font-bold mb-6">{isAdding ? 'Add New Teacher' : 'Edit Teacher'}</h3>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">AFID</label>
                                                <input
                                                    type="text"
                                                    value={formData.afid}
                                                    onChange={(e) => setFormData({ ...formData, afid: e.target.value.toUpperCase() })}
                                                    disabled={!isAdding}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Name</label>
                                                <input
                                                    type="text"
                                                    value={formData.name}
                                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Subject</label>
                                                <select
                                                    value={formData.subject}
                                                    onChange={(e) => setFormData({ ...formData, subject: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                >
                                                    <option value="">Select Subject</option>
                                                    <option>Physics</option>
                                                    <option>Chemistry</option>
                                                    <option>Maths</option>
                                                    <option>Biology</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">School</label>
                                                <input
                                                    type="text"
                                                    value={formData.school}
                                                    onChange={(e) => setFormData({ ...formData, school: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                                                <input
                                                    type="date"
                                                    value={formData.dob}
                                                    onChange={(e) => setFormData({ ...formData, dob: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                                <input
                                                    type="email"
                                                    value={formData.email}
                                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                                <input
                                                    type="tel"
                                                    value={formData.phone}
                                                    onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                                <input
                                                    type="text"
                                                    value={formData.password}
                                                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                                                    className="w-full px-3 py-2 border rounded-lg"
                                                />
                                            </div>
                                        </div>
                                        <div className="flex gap-4 mt-6">
                                            <button onClick={handleSave} className="flex-1 bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600">
                                                Save
                                            </button>
                                            <button 
                                                onClick={() => { setIsAdding(false); setEditingTeacher(null); }}
                                                className="flex-1 bg-gray-500 text-white py-3 rounded-lg font-semibold hover:bg-gray-600"
                                            >
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}

                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="border-b-2 border-gray-200 bg-gray-50">
                                                <th className="text-left p-3 font-semibold">AFID</th>
                                                <th className="text-left p-3 font-semibold">Name</th>
                                                <th className="text-left p-3 font-semibold">Subject</th>
                                                <th className="text-left p-3 font-semibold">School</th>
                                                <th className="text-left p-3 font-semibold">Contact</th>
                                                <th className="text-left p-3 font-semibold">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {teachers.map((teacher) => (
                                                <tr key={teacher.afid} className="border-b hover:bg-gray-50">
                                                    <td className="p-3">{teacher.afid}</td>
                                                    <td className="p-3 font-medium">{teacher.name}</td>
                                                    <td className="p-3">{teacher.subject}</td>
                                                    <td className="p-3">{teacher.school}</td>
                                                    <td className="p-3 text-sm">{teacher.phone}</td>
                                                    <td className="p-3">
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => {
                                                                    setEditingTeacher(teacher.afid);
                                                                    setFormData(teacher);
                                                                }}
                                                                className="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600"
                                                            >
                                                                Edit
                                                            </button>
                                                            <button
                                                                onClick={() => handleDelete(teacher.afid)}
                                                                className="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600"
                                                            >
                                                                Delete
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    );
                };

                const CurriculumManagement = () => {
                    const [selectedSubject, setSelectedSubject] = useState('Physics');
                    const [selectedGrade, setSelectedGrade] = useState(11);
                    const [
